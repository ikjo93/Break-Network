### HTTPS 적용 전 (HTTP)
+ 클라이언트가 서버에 메시지를 보낼 때 중간에 누군가 탈취하여 이를 변조할 수 있다.

<br>

### 대칭 키 암호화
+ 암호 키가 대칭적으로서 메시지를 암호화 할 때와 복호화 할 때 키가 동일한 암호화 방식

<br>

### HTTPS 동작 원리
+ 클라이언트는 서버에 메시지를 보내기 전에 메시지를 암호화할 키를 먼저 전달한다.
+ 클라이언트는 이 키를 이용해 보내려는 메시지를 암호화 한 뒤에 암호화한 메시지를 서버에 전송한다.
  + 사용되는 대표 알고리즘 : AES
+ 서버는 암호화된 메시지를 받고 키로 이 암호화된 메시지를 복구하여 원문의 메시지를 받는다.
+ but, 클라이언트가 서버에 키를 전송할 때 누군가 탈취한다면? (Fake Key로 변조하여 전송한다면?) 

<br>

### 안전한 키 교환 위한 알고리즘
+ RSA 키 교환
+ 디피-헬먼(Diffie-Hellman) 키 교환

<br>

### RSA 키 교환
+ 비대칭 키 알고리즘
  + 메시지를 암호화하는 키와 복호화하는 키가 다름 → **안전하게 대칭 키 교환 가능**
  + 항상 두 개의 키(public, private)를 쌍으로 가짐
+ 비대칭 키 알고리즘은 대칭 키를 안전하게 교환하기 위한 것
+ public key로 암호화 → private key로 복호화
+ private key로 암호화 → public key로 복호화

<br>

### RAS 키 교환 동작원리
+ 최초 서버는 RAS 키 한 쌍(public key와 private key) 생성
+ public key를 클라이언트에 전송
+ 클라이언트는 public key를 통해 교환하고 싶은 **키(대칭 키) 자체**를 RSA 알고리즘으로 암호화 해서 서버에 전송
  + 메시지 원문은 키(대칭 키)로 암호화
+ 서버는 private key를 통해 해당 키를 복호화하고 이를 통해 메시지 원문 획득
+ 중간에 클라이언트의 요청을 탈취해도 private key가 없으면 이를 변조할 수 없음
+ public key로 메시지를 암호화하지 않는 이유 : 대칭 키 알고리즘의 속도가 비대칭 키 알고리즘의 속도 보다 훨씬 빠름

<br>

### RAS 키의 문제점
+ 클라이언트는 해당 public key가 서버가 보낸 게 맞는지 확신할 수 없음
  + 서버가 클라이언트에 최초 public key를 전송할 때 누군가 탈취하여 변조할 수 있음

<br>

### RAS 키의 문제점 해결 : 제3자 기관 CA
+ 서버가 최초 RAS 키 한 쌍(public key와 private key)을 생성하고 본인의 도메인 정보, 기관명 등의 정보와 함께 public key를 CA에 전송 및 인증서 발급
  + 이러한 과정을 CSR이라고 함
  + 발급된 인증서에는 서버의 퍼블릭 키와 기타 정보 외에 CA가 만든 **서명 값**이 적혀 있다.
  + 서명 값 : 인증서의 정보를 해쉬화한 후 CA 본인의 private key로 암호화한 값 → 인증서의 정보가 변경되었는지 확인할 수 있는 값
+ 윈도우, Mac OS 등의 운영체제 자체나 크롬, 사파리 등의 웹 브라우저 자체에는 믿을 수 있는 CA 인증서들이 이미 설치되어 있고 해당 인증서 안에는 이미 public key가 존재한다.
  + (example) 구글 인증서의 경우 구글 서버 자체의 public key와 인증서 자체에 대한 CA의 서명 값이 존재한다.
+ 서버는 발급받은 인증서를 클라이언트에 전송
+ 앞서 제3자 기관인 CA에 등록된 public key를 가지고 있는 클라이언트는 이 public key를 통해 해당 인증서의 서명 값을 복호화하여 인증서의 정보가 변조되었는지 안되었는지 검증할 수 있다.

<br>

### 참고자료
+ `https://www.youtube.com/watch?v=NhTstvC7DYY`


